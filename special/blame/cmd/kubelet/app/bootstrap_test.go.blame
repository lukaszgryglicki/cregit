0000000000000000000000000000000000000000;;	/*
0000000000000000000000000000000000000000;;	Copyright 2016 The Kubernetes Authors.
3159cdfc2b9c56d4333d8da215757a1ae323156f;;	
0000000000000000000000000000000000000000;;	Licensed under the Apache License, Version 2.0 (the "License");
0000000000000000000000000000000000000000;;	you may not use this file except in compliance with the License.
0000000000000000000000000000000000000000;;	You may obtain a copy of the License at
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	    http://www.apache.org/licenses/LICENSE-2.0
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	Unless required by applicable law or agreed to in writing, software
0000000000000000000000000000000000000000;;	distributed under the License is distributed on an "AS IS" BASIS,
0000000000000000000000000000000000000000;;	WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
0000000000000000000000000000000000000000;;	See the License for the specific language governing permissions and
0000000000000000000000000000000000000000;;	limitations under the License.
0000000000000000000000000000000000000000;;	*/
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	package app
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	import (
0000000000000000000000000000000000000000;;		"io/ioutil"
0000000000000000000000000000000000000000;;		"os"
0000000000000000000000000000000000000000;;		"reflect"
0000000000000000000000000000000000000000;;		"testing"
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;		"k8s.io/apimachinery/pkg/util/diff"
0000000000000000000000000000000000000000;;		restclient "k8s.io/client-go/rest"
0000000000000000000000000000000000000000;;	)
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	func TestLoadRESTClientConfig(t *testing.T) {
0000000000000000000000000000000000000000;;		testData := []byte(`
0000000000000000000000000000000000000000;;	apiVersion: v1
0000000000000000000000000000000000000000;;	kind: Config
0000000000000000000000000000000000000000;;	clusters:
0000000000000000000000000000000000000000;;	- cluster:
0000000000000000000000000000000000000000;;	    certificate-authority: ca-a.crt
0000000000000000000000000000000000000000;;	    server: https://cluster-a.com
0000000000000000000000000000000000000000;;	  name: cluster-a
0000000000000000000000000000000000000000;;	- cluster:
0000000000000000000000000000000000000000;;	    certificate-authority-data: VGVzdA== 
0000000000000000000000000000000000000000;;	    server: https://cluster-b.com
0000000000000000000000000000000000000000;;	  name: cluster-b
0000000000000000000000000000000000000000;;	contexts:
0000000000000000000000000000000000000000;;	- context:
0000000000000000000000000000000000000000;;	    cluster: cluster-a
0000000000000000000000000000000000000000;;	    namespace: ns-a
0000000000000000000000000000000000000000;;	    user: user-a
0000000000000000000000000000000000000000;;	  name: context-a
0000000000000000000000000000000000000000;;	- context:
0000000000000000000000000000000000000000;;	    cluster: cluster-b
0000000000000000000000000000000000000000;;	    namespace: ns-b
0000000000000000000000000000000000000000;;	    user: user-b
0000000000000000000000000000000000000000;;	  name: context-b
0000000000000000000000000000000000000000;;	current-context: context-b
0000000000000000000000000000000000000000;;	users:
0000000000000000000000000000000000000000;;	- name: user-a
0000000000000000000000000000000000000000;;	  user:
0000000000000000000000000000000000000000;;	    token: mytoken-a
0000000000000000000000000000000000000000;;	- name: user-b
0000000000000000000000000000000000000000;;	  user:
0000000000000000000000000000000000000000;;	    token: mytoken-b
0000000000000000000000000000000000000000;;	`)
0000000000000000000000000000000000000000;;		f, err := ioutil.TempFile("", "kubeconfig")
0000000000000000000000000000000000000000;;		if err != nil {
0000000000000000000000000000000000000000;;			t.Fatal(err)
0000000000000000000000000000000000000000;;		}
0000000000000000000000000000000000000000;;		defer os.Remove(f.Name())
0000000000000000000000000000000000000000;;		ioutil.WriteFile(f.Name(), testData, os.FileMode(0755))
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;		config, err := loadRESTClientConfig(f.Name())
0000000000000000000000000000000000000000;;		if err != nil {
0000000000000000000000000000000000000000;;			t.Fatal(err)
0000000000000000000000000000000000000000;;		}
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;		expectedConfig := &restclient.Config{
0000000000000000000000000000000000000000;;			Host: "https://cluster-b.com",
0000000000000000000000000000000000000000;;			TLSClientConfig: restclient.TLSClientConfig{
0000000000000000000000000000000000000000;;				CAData: []byte(`Test`),
0000000000000000000000000000000000000000;;			},
0000000000000000000000000000000000000000;;			BearerToken: "mytoken-b",
0000000000000000000000000000000000000000;;		}
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;		if !reflect.DeepEqual(config, expectedConfig) {
0000000000000000000000000000000000000000;;			t.Errorf("Unexpected config: %s", diff.ObjectDiff(config, expectedConfig))
0000000000000000000000000000000000000000;;		}
0000000000000000000000000000000000000000;;	}
