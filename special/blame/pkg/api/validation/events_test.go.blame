0000000000000000000000000000000000000000;;	/*
0000000000000000000000000000000000000000;;	Copyright 2014 The Kubernetes Authors.
daefe8eeb57eea6d74aec5cfb79e38086b271e30;;	
0000000000000000000000000000000000000000;;	Licensed under the Apache License, Version 2.0 (the "License");
0000000000000000000000000000000000000000;;	you may not use this file except in compliance with the License.
0000000000000000000000000000000000000000;;	You may obtain a copy of the License at
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	    http://www.apache.org/licenses/LICENSE-2.0
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	Unless required by applicable law or agreed to in writing, software
0000000000000000000000000000000000000000;;	distributed under the License is distributed on an "AS IS" BASIS,
0000000000000000000000000000000000000000;;	WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
0000000000000000000000000000000000000000;;	See the License for the specific language governing permissions and
0000000000000000000000000000000000000000;;	limitations under the License.
0000000000000000000000000000000000000000;;	*/
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	package validation
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	import (
0000000000000000000000000000000000000000;;		"testing"
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;		metav1 "k8s.io/apimachinery/pkg/apis/meta/v1"
0000000000000000000000000000000000000000;;		"k8s.io/kubernetes/pkg/api"
0000000000000000000000000000000000000000;;	)
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	func TestValidateEvent(t *testing.T) {
0000000000000000000000000000000000000000;;		table := []struct {
0000000000000000000000000000000000000000;;			*api.Event
0000000000000000000000000000000000000000;;			valid bool
0000000000000000000000000000000000000000;;		}{
0000000000000000000000000000000000000000;;			{
0000000000000000000000000000000000000000;;				&api.Event{
0000000000000000000000000000000000000000;;					ObjectMeta: metav1.ObjectMeta{
0000000000000000000000000000000000000000;;						Name:      "test1",
0000000000000000000000000000000000000000;;						Namespace: "foo",
0000000000000000000000000000000000000000;;					},
0000000000000000000000000000000000000000;;					InvolvedObject: api.ObjectReference{
0000000000000000000000000000000000000000;;						Namespace: "bar",
0000000000000000000000000000000000000000;;						Kind:      "Pod",
0000000000000000000000000000000000000000;;					},
0000000000000000000000000000000000000000;;				},
0000000000000000000000000000000000000000;;				false,
0000000000000000000000000000000000000000;;			}, {
0000000000000000000000000000000000000000;;				&api.Event{
0000000000000000000000000000000000000000;;					ObjectMeta: metav1.ObjectMeta{
0000000000000000000000000000000000000000;;						Name:      "test2",
0000000000000000000000000000000000000000;;						Namespace: "aoeu-_-aoeu",
0000000000000000000000000000000000000000;;					},
0000000000000000000000000000000000000000;;					InvolvedObject: api.ObjectReference{
0000000000000000000000000000000000000000;;						Namespace: "aoeu-_-aoeu",
0000000000000000000000000000000000000000;;						Kind:      "Pod",
0000000000000000000000000000000000000000;;					},
0000000000000000000000000000000000000000;;				},
0000000000000000000000000000000000000000;;				false,
0000000000000000000000000000000000000000;;			}, {
0000000000000000000000000000000000000000;;				&api.Event{
0000000000000000000000000000000000000000;;					ObjectMeta: metav1.ObjectMeta{
0000000000000000000000000000000000000000;;						Name:      "test3",
0000000000000000000000000000000000000000;;						Namespace: metav1.NamespaceDefault,
0000000000000000000000000000000000000000;;					},
0000000000000000000000000000000000000000;;					InvolvedObject: api.ObjectReference{
0000000000000000000000000000000000000000;;						APIVersion: "v1",
0000000000000000000000000000000000000000;;						Kind:       "Node",
0000000000000000000000000000000000000000;;					},
0000000000000000000000000000000000000000;;				},
0000000000000000000000000000000000000000;;				true,
0000000000000000000000000000000000000000;;			}, {
0000000000000000000000000000000000000000;;				&api.Event{
0000000000000000000000000000000000000000;;					ObjectMeta: metav1.ObjectMeta{
0000000000000000000000000000000000000000;;						Name:      "test4",
0000000000000000000000000000000000000000;;						Namespace: metav1.NamespaceDefault,
0000000000000000000000000000000000000000;;					},
0000000000000000000000000000000000000000;;					InvolvedObject: api.ObjectReference{
0000000000000000000000000000000000000000;;						APIVersion: "v1",
0000000000000000000000000000000000000000;;						Kind:       "Namespace",
0000000000000000000000000000000000000000;;					},
0000000000000000000000000000000000000000;;				},
0000000000000000000000000000000000000000;;				true,
0000000000000000000000000000000000000000;;			}, {
0000000000000000000000000000000000000000;;				&api.Event{
0000000000000000000000000000000000000000;;					ObjectMeta: metav1.ObjectMeta{
0000000000000000000000000000000000000000;;						Name:      "test5",
0000000000000000000000000000000000000000;;						Namespace: metav1.NamespaceDefault,
0000000000000000000000000000000000000000;;					},
0000000000000000000000000000000000000000;;					InvolvedObject: api.ObjectReference{
0000000000000000000000000000000000000000;;						APIVersion: "extensions/v1beta1",
0000000000000000000000000000000000000000;;						Kind:       "NoKind",
0000000000000000000000000000000000000000;;						Namespace:  metav1.NamespaceDefault,
0000000000000000000000000000000000000000;;					},
0000000000000000000000000000000000000000;;				},
0000000000000000000000000000000000000000;;				true,
0000000000000000000000000000000000000000;;			}, {
0000000000000000000000000000000000000000;;				&api.Event{
0000000000000000000000000000000000000000;;					ObjectMeta: metav1.ObjectMeta{
0000000000000000000000000000000000000000;;						Name:      "test6",
0000000000000000000000000000000000000000;;						Namespace: metav1.NamespaceDefault,
0000000000000000000000000000000000000000;;					},
0000000000000000000000000000000000000000;;					InvolvedObject: api.ObjectReference{
0000000000000000000000000000000000000000;;						APIVersion: "extensions/v1beta1",
0000000000000000000000000000000000000000;;						Kind:       "Job",
0000000000000000000000000000000000000000;;						Namespace:  "foo",
0000000000000000000000000000000000000000;;					},
0000000000000000000000000000000000000000;;				},
0000000000000000000000000000000000000000;;				false,
0000000000000000000000000000000000000000;;			}, {
0000000000000000000000000000000000000000;;				&api.Event{
0000000000000000000000000000000000000000;;					ObjectMeta: metav1.ObjectMeta{
0000000000000000000000000000000000000000;;						Name:      "test7",
0000000000000000000000000000000000000000;;						Namespace: metav1.NamespaceDefault,
0000000000000000000000000000000000000000;;					},
0000000000000000000000000000000000000000;;					InvolvedObject: api.ObjectReference{
0000000000000000000000000000000000000000;;						APIVersion: "extensions/v1beta1",
0000000000000000000000000000000000000000;;						Kind:       "Job",
0000000000000000000000000000000000000000;;						Namespace:  metav1.NamespaceDefault,
0000000000000000000000000000000000000000;;					},
0000000000000000000000000000000000000000;;				},
0000000000000000000000000000000000000000;;				true,
0000000000000000000000000000000000000000;;			}, {
0000000000000000000000000000000000000000;;				&api.Event{
0000000000000000000000000000000000000000;;					ObjectMeta: metav1.ObjectMeta{
0000000000000000000000000000000000000000;;						Name:      "test8",
0000000000000000000000000000000000000000;;						Namespace: metav1.NamespaceDefault,
0000000000000000000000000000000000000000;;					},
0000000000000000000000000000000000000000;;					InvolvedObject: api.ObjectReference{
0000000000000000000000000000000000000000;;						APIVersion: "other/v1beta1",
0000000000000000000000000000000000000000;;						Kind:       "Job",
0000000000000000000000000000000000000000;;						Namespace:  "foo",
0000000000000000000000000000000000000000;;					},
0000000000000000000000000000000000000000;;				},
0000000000000000000000000000000000000000;;				false,
0000000000000000000000000000000000000000;;			}, {
0000000000000000000000000000000000000000;;				&api.Event{
0000000000000000000000000000000000000000;;					ObjectMeta: metav1.ObjectMeta{
0000000000000000000000000000000000000000;;						Name:      "test9",
0000000000000000000000000000000000000000;;						Namespace: "foo",
0000000000000000000000000000000000000000;;					},
0000000000000000000000000000000000000000;;					InvolvedObject: api.ObjectReference{
0000000000000000000000000000000000000000;;						APIVersion: "other/v1beta1",
0000000000000000000000000000000000000000;;						Kind:       "Job",
0000000000000000000000000000000000000000;;						Namespace:  "foo",
0000000000000000000000000000000000000000;;					},
0000000000000000000000000000000000000000;;				},
0000000000000000000000000000000000000000;;				true,
0000000000000000000000000000000000000000;;			}, {
0000000000000000000000000000000000000000;;				&api.Event{
0000000000000000000000000000000000000000;;					ObjectMeta: metav1.ObjectMeta{
0000000000000000000000000000000000000000;;						Name:      "test10",
0000000000000000000000000000000000000000;;						Namespace: metav1.NamespaceDefault,
0000000000000000000000000000000000000000;;					},
0000000000000000000000000000000000000000;;					InvolvedObject: api.ObjectReference{
0000000000000000000000000000000000000000;;						APIVersion: "extensions",
0000000000000000000000000000000000000000;;						Kind:       "Job",
0000000000000000000000000000000000000000;;						Namespace:  "foo",
0000000000000000000000000000000000000000;;					},
0000000000000000000000000000000000000000;;				},
0000000000000000000000000000000000000000;;				false,
0000000000000000000000000000000000000000;;			}, {
0000000000000000000000000000000000000000;;				&api.Event{
0000000000000000000000000000000000000000;;					ObjectMeta: metav1.ObjectMeta{
0000000000000000000000000000000000000000;;						Name:      "test11",
0000000000000000000000000000000000000000;;						Namespace: "foo",
0000000000000000000000000000000000000000;;					},
0000000000000000000000000000000000000000;;					InvolvedObject: api.ObjectReference{
0000000000000000000000000000000000000000;;						// must register in v1beta1 to be true
0000000000000000000000000000000000000000;;						APIVersion: "extensions/v1beta1",
0000000000000000000000000000000000000000;;						Kind:       "Job",
0000000000000000000000000000000000000000;;						Namespace:  "foo",
0000000000000000000000000000000000000000;;					},
0000000000000000000000000000000000000000;;				},
0000000000000000000000000000000000000000;;				true,
0000000000000000000000000000000000000000;;			},
0000000000000000000000000000000000000000;;			{
0000000000000000000000000000000000000000;;				&api.Event{
0000000000000000000000000000000000000000;;					ObjectMeta: metav1.ObjectMeta{
0000000000000000000000000000000000000000;;						Name:      "test12",
0000000000000000000000000000000000000000;;						Namespace: "foo",
0000000000000000000000000000000000000000;;					},
0000000000000000000000000000000000000000;;					InvolvedObject: api.ObjectReference{
0000000000000000000000000000000000000000;;						APIVersion: "other/v1beta1",
0000000000000000000000000000000000000000;;						Kind:       "FooBar",
0000000000000000000000000000000000000000;;						Namespace:  "bar",
0000000000000000000000000000000000000000;;					},
0000000000000000000000000000000000000000;;				},
0000000000000000000000000000000000000000;;				false,
0000000000000000000000000000000000000000;;			},
0000000000000000000000000000000000000000;;			{
0000000000000000000000000000000000000000;;				&api.Event{
0000000000000000000000000000000000000000;;					ObjectMeta: metav1.ObjectMeta{
0000000000000000000000000000000000000000;;						Name:      "test13",
0000000000000000000000000000000000000000;;						Namespace: "",
0000000000000000000000000000000000000000;;					},
0000000000000000000000000000000000000000;;					InvolvedObject: api.ObjectReference{
0000000000000000000000000000000000000000;;						APIVersion: "other/v1beta1",
0000000000000000000000000000000000000000;;						Kind:       "FooBar",
0000000000000000000000000000000000000000;;						Namespace:  "bar",
0000000000000000000000000000000000000000;;					},
0000000000000000000000000000000000000000;;				},
0000000000000000000000000000000000000000;;				false,
0000000000000000000000000000000000000000;;			},
0000000000000000000000000000000000000000;;			{
0000000000000000000000000000000000000000;;				&api.Event{
0000000000000000000000000000000000000000;;					ObjectMeta: metav1.ObjectMeta{
0000000000000000000000000000000000000000;;						Name:      "test14",
0000000000000000000000000000000000000000;;						Namespace: "foo",
0000000000000000000000000000000000000000;;					},
0000000000000000000000000000000000000000;;					InvolvedObject: api.ObjectReference{
0000000000000000000000000000000000000000;;						APIVersion: "other/v1beta1",
0000000000000000000000000000000000000000;;						Kind:       "FooBar",
0000000000000000000000000000000000000000;;						Namespace:  "",
0000000000000000000000000000000000000000;;					},
0000000000000000000000000000000000000000;;				},
0000000000000000000000000000000000000000;;				false,
0000000000000000000000000000000000000000;;			},
0000000000000000000000000000000000000000;;		}
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;		for _, item := range table {
0000000000000000000000000000000000000000;;			if e, a := item.valid, len(ValidateEvent(item.Event)) == 0; e != a {
0000000000000000000000000000000000000000;;				t.Errorf("%v: expected %v, got %v", item.Event.Name, e, a)
0000000000000000000000000000000000000000;;			}
0000000000000000000000000000000000000000;;		}
0000000000000000000000000000000000000000;;	}
