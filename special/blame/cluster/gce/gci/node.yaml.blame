0000000000000000000000000000000000000000;;	#cloud-config
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	write_files:
0000000000000000000000000000000000000000;;	  - path: /etc/systemd/system/kube-node-installation.service
0000000000000000000000000000000000000000;;	    permissions: 0644
0000000000000000000000000000000000000000;;	    owner: root
0000000000000000000000000000000000000000;;	    content: |
0000000000000000000000000000000000000000;;	      [Unit]
0000000000000000000000000000000000000000;;	      Description=Download and install k8s binaries and configurations
0000000000000000000000000000000000000000;;	      After=network-online.target
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	      [Service]
0000000000000000000000000000000000000000;;	      Type=oneshot
0000000000000000000000000000000000000000;;	      RemainAfterExit=yes
0000000000000000000000000000000000000000;;	      ExecStartPre=/bin/mkdir -p /home/kubernetes/bin
0000000000000000000000000000000000000000;;	      ExecStartPre=/bin/mount --bind /home/kubernetes/bin /home/kubernetes/bin
0000000000000000000000000000000000000000;;	      ExecStartPre=/bin/mount -o remount,exec /home/kubernetes/bin
0000000000000000000000000000000000000000;;	      ExecStartPre=/usr/bin/curl --fail --retry 5 --retry-delay 3 --silent --show-error	-H "X-Google-Metadata-Request: True" -o /home/kubernetes/bin/configure.sh http://metadata.google.internal/computeMetadata/v1/instance/attributes/configure-sh
0000000000000000000000000000000000000000;;	      ExecStartPre=/bin/chmod 544 /home/kubernetes/bin/configure.sh
0000000000000000000000000000000000000000;;	      ExecStart=/home/kubernetes/bin/configure.sh
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	      [Install]
0000000000000000000000000000000000000000;;	      WantedBy=kubernetes.target
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	  - path: /etc/systemd/system/kube-node-configuration.service
0000000000000000000000000000000000000000;;	    permissions: 0644
0000000000000000000000000000000000000000;;	    owner: root
0000000000000000000000000000000000000000;;	    content: |
0000000000000000000000000000000000000000;;	      [Unit]
0000000000000000000000000000000000000000;;	      Description=Configure kubernetes node
0000000000000000000000000000000000000000;;	      After=kube-node-installation.service
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	      [Service]
0000000000000000000000000000000000000000;;	      Type=oneshot
0000000000000000000000000000000000000000;;	      RemainAfterExit=yes
0000000000000000000000000000000000000000;;	      ExecStartPre=/bin/chmod 544 /home/kubernetes/bin/configure-helper.sh
0000000000000000000000000000000000000000;;	      ExecStart=/home/kubernetes/bin/configure-helper.sh
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	      [Install]
0000000000000000000000000000000000000000;;	      WantedBy=kubernetes.target
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	  - path: /etc/systemd/system/kube-docker-monitor.service
0000000000000000000000000000000000000000;;	    permissions: 0644
0000000000000000000000000000000000000000;;	    owner: root
0000000000000000000000000000000000000000;;	    content: |
0000000000000000000000000000000000000000;;	      [Unit]
0000000000000000000000000000000000000000;;	      Description=Kubernetes health monitoring for docker
0000000000000000000000000000000000000000;;	      After=kube-node-configuration.service
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	      [Service]
0000000000000000000000000000000000000000;;	      Restart=always
0000000000000000000000000000000000000000;;	      RestartSec=10
0000000000000000000000000000000000000000;;	      RemainAfterExit=yes
0000000000000000000000000000000000000000;;	      RemainAfterExit=yes
0000000000000000000000000000000000000000;;	      ExecStartPre=/bin/chmod 544 /home/kubernetes/bin/health-monitor.sh
0000000000000000000000000000000000000000;;	      ExecStart=/home/kubernetes/bin/health-monitor.sh docker
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	      [Install]
0000000000000000000000000000000000000000;;	      WantedBy=kubernetes.target
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	  - path: /etc/systemd/system/kubelet-monitor.service
0000000000000000000000000000000000000000;;	    permissions: 0644
0000000000000000000000000000000000000000;;	    owner: root
0000000000000000000000000000000000000000;;	    content: |
0000000000000000000000000000000000000000;;	      [Unit]
0000000000000000000000000000000000000000;;	      Description=Kubernetes health monitoring for kubelet
0000000000000000000000000000000000000000;;	      After=kube-node-configuration.service
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	      [Service]
0000000000000000000000000000000000000000;;	      Restart=always
0000000000000000000000000000000000000000;;	      RestartSec=10
0000000000000000000000000000000000000000;;	      RemainAfterExit=yes
0000000000000000000000000000000000000000;;	      RemainAfterExit=yes
0000000000000000000000000000000000000000;;	      ExecStartPre=/bin/chmod 544 /home/kubernetes/bin/health-monitor.sh
0000000000000000000000000000000000000000;;	      ExecStart=/home/kubernetes/bin/health-monitor.sh kubelet
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	      [Install]
0000000000000000000000000000000000000000;;	      WantedBy=kubernetes.target
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	  - path: /etc/systemd/system/kube-logrotate.timer
0000000000000000000000000000000000000000;;	    permissions: 0644
0000000000000000000000000000000000000000;;	    owner: root
0000000000000000000000000000000000000000;;	    content: |
0000000000000000000000000000000000000000;;	      [Unit]
0000000000000000000000000000000000000000;;	      Description=Hourly kube-logrotate invocation
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	      [Timer]
0000000000000000000000000000000000000000;;	      OnCalendar=hourly
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	      [Install]
0000000000000000000000000000000000000000;;	      WantedBy=kubernetes.target
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	  - path: /etc/systemd/system/kube-logrotate.service
0000000000000000000000000000000000000000;;	    permissions: 0644
0000000000000000000000000000000000000000;;	    owner: root
0000000000000000000000000000000000000000;;	    content: |
0000000000000000000000000000000000000000;;	      [Unit]
0000000000000000000000000000000000000000;;	      Description=Kubernetes log rotation
0000000000000000000000000000000000000000;;	      After=kube-node-configuration.service
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	      [Service]
0000000000000000000000000000000000000000;;	      Type=oneshot
0000000000000000000000000000000000000000;;	      ExecStart=-/usr/sbin/logrotate /etc/logrotate.conf
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	      [Install]
0000000000000000000000000000000000000000;;	      WantedBy=kubernetes.target
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	  - path: /etc/systemd/system/kubernetes.target
0000000000000000000000000000000000000000;;	    permissions: 0644
0000000000000000000000000000000000000000;;	    owner: root
0000000000000000000000000000000000000000;;	    content: |
0000000000000000000000000000000000000000;;	      [Unit]
0000000000000000000000000000000000000000;;	      Description=Kubernetes
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	      [Install]
0000000000000000000000000000000000000000;;	      WantedBy=multi-user.target
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	runcmd:
0000000000000000000000000000000000000000;;	 - systemctl daemon-reload
0000000000000000000000000000000000000000;;	 - systemctl enable kube-node-installation.service
0000000000000000000000000000000000000000;;	 - systemctl enable kube-node-configuration.service
0000000000000000000000000000000000000000;;	 - systemctl enable kube-docker-monitor.service
0000000000000000000000000000000000000000;;	 - systemctl enable kubelet-monitor.service
0000000000000000000000000000000000000000;;	 - systemctl enable kube-logrotate.timer
0000000000000000000000000000000000000000;;	 - systemctl enable kube-logrotate.service
0000000000000000000000000000000000000000;;	 - systemctl enable kubernetes.target
0000000000000000000000000000000000000000;;	 - systemctl start kubernetes.target
