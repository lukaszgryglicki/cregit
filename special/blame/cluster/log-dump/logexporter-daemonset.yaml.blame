0000000000000000000000000000000000000000;;	# Template job config for running the log exporter on the cluster as a daemonset.
0000000000000000000000000000000000000000;;	# Creates everything within 'logexporter' namespace.
0000000000000000000000000000000000000000;;	#
0000000000000000000000000000000000000000;;	# Note: Since daemonsets have "AlwaysRestart" policy for pods, we provide a long
0000000000000000000000000000000000000000;;	# sleep-duration (24 hr) to the logexporter pods so they don't finish the work and
0000000000000000000000000000000000000000;;	# get restarted while some pods are still running. So it is your duty to detect
0000000000000000000000000000000000000000;;	# the work has been done (or use some timeout) and delete the daemonset yourself.
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	apiVersion: v1
0000000000000000000000000000000000000000;;	kind: Namespace
0000000000000000000000000000000000000000;;	metadata:
0000000000000000000000000000000000000000;;	    name: logexporter
0000000000000000000000000000000000000000;;	---
0000000000000000000000000000000000000000;;	apiVersion: v1
0000000000000000000000000000000000000000;;	kind: Secret
0000000000000000000000000000000000000000;;	metadata:
0000000000000000000000000000000000000000;;	  name: google-service-account
0000000000000000000000000000000000000000;;	  namespace: logexporter
0000000000000000000000000000000000000000;;	type: Opaque
0000000000000000000000000000000000000000;;	data:
0000000000000000000000000000000000000000;;	  service-account.json: {{.ServiceAccountCredentials}}
0000000000000000000000000000000000000000;;	---
0000000000000000000000000000000000000000;;	apiVersion: extensions/v1beta1
0000000000000000000000000000000000000000;;	kind: DaemonSet
0000000000000000000000000000000000000000;;	metadata:
0000000000000000000000000000000000000000;;	  name: logexporter
0000000000000000000000000000000000000000;;	  namespace: logexporter
0000000000000000000000000000000000000000;;	spec:
0000000000000000000000000000000000000000;;	  template:
0000000000000000000000000000000000000000;;	    metadata:
0000000000000000000000000000000000000000;;	      labels:
0000000000000000000000000000000000000000;;	        app: logexporter
0000000000000000000000000000000000000000;;	    spec:
0000000000000000000000000000000000000000;;	      containers:
0000000000000000000000000000000000000000;;	      - name: logexporter-test
0000000000000000000000000000000000000000;;	        image: gcr.io/google-containers/logexporter:v0.1.0
0000000000000000000000000000000000000000;;	        env:
0000000000000000000000000000000000000000;;	        - name: NODE_NAME
0000000000000000000000000000000000000000;;	          valueFrom:
0000000000000000000000000000000000000000;;	            fieldRef:
0000000000000000000000000000000000000000;;	              fieldPath: spec.nodeName
0000000000000000000000000000000000000000;;	        command:
0000000000000000000000000000000000000000;;	        - logexporter
0000000000000000000000000000000000000000;;	        - --node-name=$(NODE_NAME)
0000000000000000000000000000000000000000;;	        - --cloud-provider={{.CloudProvider}}
0000000000000000000000000000000000000000;;	        - --gcs-path={{.GCSPath}}
0000000000000000000000000000000000000000;;	        - --gcloud-auth-file-path=/etc/service-account/service-account.json
0000000000000000000000000000000000000000;;	        - --enable-hollow-node-logs={{.EnableHollowNodeLogs}}
0000000000000000000000000000000000000000;;	        - --sleep-duration=24h
0000000000000000000000000000000000000000;;	        - --alsologtostderr
0000000000000000000000000000000000000000;;	        volumeMounts:
0000000000000000000000000000000000000000;;	        - mountPath: /etc/service-account
0000000000000000000000000000000000000000;;	          name: service
0000000000000000000000000000000000000000;;	          readOnly: true
0000000000000000000000000000000000000000;;	        - mountPath: /var/log
0000000000000000000000000000000000000000;;	          name: varlog
0000000000000000000000000000000000000000;;	          readOnly: true
0000000000000000000000000000000000000000;;	        - mountPath: /workspace/etc
0000000000000000000000000000000000000000;;	          name: hostetc
0000000000000000000000000000000000000000;;	          readOnly: true
0000000000000000000000000000000000000000;;	        resources:
0000000000000000000000000000000000000000;;	          requests:
0000000000000000000000000000000000000000;;	            cpu: 10m
0000000000000000000000000000000000000000;;	            memory: 10Mi
0000000000000000000000000000000000000000;;	      volumes:
0000000000000000000000000000000000000000;;	      - name: service
0000000000000000000000000000000000000000;;	        secret:
0000000000000000000000000000000000000000;;	          secretName: google-service-account
0000000000000000000000000000000000000000;;	      - name: varlog
0000000000000000000000000000000000000000;;	        hostPath:
0000000000000000000000000000000000000000;;	          path: /var/log
0000000000000000000000000000000000000000;;	      - name: hostetc
0000000000000000000000000000000000000000;;	        hostPath:
0000000000000000000000000000000000000000;;	          path: /etc
