0000000000000000000000000000000000000000;;	kind: ConfigMap
0000000000000000000000000000000000000000;;	apiVersion: v1
0000000000000000000000000000000000000000;;	metadata:
0000000000000000000000000000000000000000;;	  name: metadata-proxy-config
0000000000000000000000000000000000000000;;	  namespace: kube-system
0000000000000000000000000000000000000000;;	  labels:
0000000000000000000000000000000000000000;;	    addonmanager.kubernetes.io/mode: EnsureExists
0000000000000000000000000000000000000000;;	data:
0000000000000000000000000000000000000000;;	  nginx.conf: |-
0000000000000000000000000000000000000000;;	    user www-data;
0000000000000000000000000000000000000000;;	    worker_processes 4;
0000000000000000000000000000000000000000;;	    pid /run/nginx.pid;
0000000000000000000000000000000000000000;;	    error_log /dev/stdout;
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	    events {
0000000000000000000000000000000000000000;;	      worker_connections 20;
0000000000000000000000000000000000000000;;	    }
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	    http {
0000000000000000000000000000000000000000;;	      access_log /dev/stdout;
0000000000000000000000000000000000000000;;	      server {
0000000000000000000000000000000000000000;;	        listen 127.0.0.1:988;
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	        # By default, return 403. This protects us from new API versions.
0000000000000000000000000000000000000000;;	        location / {
0000000000000000000000000000000000000000;;	            return 403;
0000000000000000000000000000000000000000;;	        }
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	        # Allow for REST discovery.
0000000000000000000000000000000000000000;;	        location = / {
0000000000000000000000000000000000000000;;	            proxy_pass http://169.254.169.254;
0000000000000000000000000000000000000000;;	        }
0000000000000000000000000000000000000000;;	        location = /computeMetadata/ {
0000000000000000000000000000000000000000;;	            proxy_pass http://169.254.169.254;
0000000000000000000000000000000000000000;;	        }
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	        # By default, allow the v0.1, v1beta1, and v1 APIs.
0000000000000000000000000000000000000000;;	        location /0.1/ {
0000000000000000000000000000000000000000;;	            proxy_pass http://169.254.169.254;
0000000000000000000000000000000000000000;;	        }
0000000000000000000000000000000000000000;;	        location /computeMetadata/v1beta1/ {
0000000000000000000000000000000000000000;;	            proxy_pass http://169.254.169.254;
0000000000000000000000000000000000000000;;	        }
0000000000000000000000000000000000000000;;	        location /computeMetadata/v1/ {
0000000000000000000000000000000000000000;;	            proxy_pass http://169.254.169.254;
0000000000000000000000000000000000000000;;	        }
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	        # Return a 403 for the kube-env attribute in all allowed API versions.
0000000000000000000000000000000000000000;;	        location /0.1/meta-data/attributes/kube-env {
0000000000000000000000000000000000000000;;	            return 403;
0000000000000000000000000000000000000000;;	        }
0000000000000000000000000000000000000000;;	        location /computeMetadata/v1beta1/instance/attributes/kube-env {
0000000000000000000000000000000000000000;;	            return 403;
0000000000000000000000000000000000000000;;	        }
0000000000000000000000000000000000000000;;	        location /computeMetadata/v1/instance/attributes/kube-env {
0000000000000000000000000000000000000000;;	            return 403;
0000000000000000000000000000000000000000;;	        }
0000000000000000000000000000000000000000;;	      }
0000000000000000000000000000000000000000;;	    }
0000000000000000000000000000000000000000;;	
