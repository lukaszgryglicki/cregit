0000000000000000000000000000000000000000;;	apiVersion: "apps/v1beta1"
0000000000000000000000000000000000000000;;	kind: StatefulSet
0000000000000000000000000000000000000000;;	metadata:
0000000000000000000000000000000000000000;;	  name: cassandra
0000000000000000000000000000000000000000;;	spec:
0000000000000000000000000000000000000000;;	  serviceName: cassandra
0000000000000000000000000000000000000000;;	  replicas: 3
0000000000000000000000000000000000000000;;	  template:
0000000000000000000000000000000000000000;;	    metadata:
0000000000000000000000000000000000000000;;	      labels:
0000000000000000000000000000000000000000;;	        app: cassandra
0000000000000000000000000000000000000000;;	    spec:
0000000000000000000000000000000000000000;;	      containers:
0000000000000000000000000000000000000000;;	      - name: cassandra
0000000000000000000000000000000000000000;;	        image: gcr.io/google-samples/cassandra:v12
0000000000000000000000000000000000000000;;	        imagePullPolicy: Always
0000000000000000000000000000000000000000;;	        ports:
0000000000000000000000000000000000000000;;	        - containerPort: 7000
0000000000000000000000000000000000000000;;	          name: intra-node
0000000000000000000000000000000000000000;;	        - containerPort: 7001
0000000000000000000000000000000000000000;;	          name: tls-intra-node
0000000000000000000000000000000000000000;;	        - containerPort: 7199
0000000000000000000000000000000000000000;;	          name: jmx
0000000000000000000000000000000000000000;;	        - containerPort: 9042
0000000000000000000000000000000000000000;;	          name: cql
0000000000000000000000000000000000000000;;	        resources:
0000000000000000000000000000000000000000;;	          limits:
0000000000000000000000000000000000000000;;	            cpu: "500m"
0000000000000000000000000000000000000000;;	            memory: 1Gi
0000000000000000000000000000000000000000;;	          requests:
0000000000000000000000000000000000000000;;	           cpu: "500m"
0000000000000000000000000000000000000000;;	           memory: 1Gi
0000000000000000000000000000000000000000;;	        securityContext:
0000000000000000000000000000000000000000;;	          capabilities:
0000000000000000000000000000000000000000;;	            add:
0000000000000000000000000000000000000000;;	              - IPC_LOCK
0000000000000000000000000000000000000000;;	        lifecycle:
0000000000000000000000000000000000000000;;	          preStop:
0000000000000000000000000000000000000000;;	            exec:
0000000000000000000000000000000000000000;;	              command: ["/bin/sh", "-c", "PID=$(pidof java) && kill $PID && while ps -p $PID > /dev/null; do sleep 1; done"]
0000000000000000000000000000000000000000;;	        env:
0000000000000000000000000000000000000000;;	          - name: MAX_HEAP_SIZE
0000000000000000000000000000000000000000;;	            value: 512M
0000000000000000000000000000000000000000;;	          - name: HEAP_NEWSIZE
0000000000000000000000000000000000000000;;	            value: 100M
0000000000000000000000000000000000000000;;	          - name: CASSANDRA_SEEDS
0000000000000000000000000000000000000000;;	            value: "cassandra-0.cassandra.default.svc.cluster.local"
0000000000000000000000000000000000000000;;	          - name: CASSANDRA_CLUSTER_NAME
0000000000000000000000000000000000000000;;	            value: "K8Demo"
0000000000000000000000000000000000000000;;	          - name: CASSANDRA_DC
0000000000000000000000000000000000000000;;	            value: "DC1-K8Demo"
0000000000000000000000000000000000000000;;	          - name: CASSANDRA_RACK
0000000000000000000000000000000000000000;;	            value: "Rack1-K8Demo"
0000000000000000000000000000000000000000;;	          - name: CASSANDRA_AUTO_BOOTSTRAP
0000000000000000000000000000000000000000;;	            value: "false"
0000000000000000000000000000000000000000;;	          - name: POD_IP
0000000000000000000000000000000000000000;;	            valueFrom:
0000000000000000000000000000000000000000;;	              fieldRef:
0000000000000000000000000000000000000000;;	                fieldPath: status.podIP
0000000000000000000000000000000000000000;;	          - name: POD_NAMESPACE
0000000000000000000000000000000000000000;;	            valueFrom:
0000000000000000000000000000000000000000;;	              fieldRef:
0000000000000000000000000000000000000000;;	                fieldPath: metadata.namespace
0000000000000000000000000000000000000000;;	        readinessProbe:
0000000000000000000000000000000000000000;;	          exec:
0000000000000000000000000000000000000000;;	            command:
0000000000000000000000000000000000000000;;	            - /bin/bash
0000000000000000000000000000000000000000;;	            - -c
0000000000000000000000000000000000000000;;	            - /ready-probe.sh
0000000000000000000000000000000000000000;;	          initialDelaySeconds: 15
0000000000000000000000000000000000000000;;	          timeoutSeconds: 5
0000000000000000000000000000000000000000;;	        # These volume mounts are persistent. They are like inline claims,
0000000000000000000000000000000000000000;;	        # but not exactly because the names need to match exactly one of
0000000000000000000000000000000000000000;;	        # the stateful pod volumes.
0000000000000000000000000000000000000000;;	        volumeMounts:
0000000000000000000000000000000000000000;;	        - name: cassandra-data
0000000000000000000000000000000000000000;;	          mountPath: /cassandra_data
0000000000000000000000000000000000000000;;	  # These are converted to volume claims by the controller
0000000000000000000000000000000000000000;;	  # and mounted at the paths mentioned above.
0000000000000000000000000000000000000000;;	  # do not use these in production until ssd GCEPersistentDisk or other ssd pd
0000000000000000000000000000000000000000;;	  volumeClaimTemplates:
0000000000000000000000000000000000000000;;	  - metadata:
0000000000000000000000000000000000000000;;	      name: cassandra-data
0000000000000000000000000000000000000000;;	      annotations:
0000000000000000000000000000000000000000;;	        volume.beta.kubernetes.io/storage-class: fast
0000000000000000000000000000000000000000;;	    spec:
0000000000000000000000000000000000000000;;	      accessModes: [ "ReadWriteOnce" ]
0000000000000000000000000000000000000000;;	      resources:
0000000000000000000000000000000000000000;;	        requests:
0000000000000000000000000000000000000000;;	          storage: 1Gi
0000000000000000000000000000000000000000;;	---
0000000000000000000000000000000000000000;;	kind: StorageClass
0000000000000000000000000000000000000000;;	apiVersion: storage.k8s.io/v1beta1
0000000000000000000000000000000000000000;;	metadata:
0000000000000000000000000000000000000000;;	  name: fast
0000000000000000000000000000000000000000;;	provisioner: kubernetes.io/gce-pd
0000000000000000000000000000000000000000;;	parameters:
0000000000000000000000000000000000000000;;	  type: pd-ssd
