0000000000000000000000000000000000000000;;	kind: Pod
0000000000000000000000000000000000000000;;	apiVersion: v1
0000000000000000000000000000000000000000;;	metadata:
0000000000000000000000000000000000000000;;	  name: vttablet-{{uid}}
0000000000000000000000000000000000000000;;	  labels:
0000000000000000000000000000000000000000;;	    component: vttablet
0000000000000000000000000000000000000000;;	    keyspace: "{{keyspace}}"
0000000000000000000000000000000000000000;;	    shard: "{{shard_label}}"
0000000000000000000000000000000000000000;;	    tablet: "{{alias}}"
0000000000000000000000000000000000000000;;	    app: vitess
0000000000000000000000000000000000000000;;	spec:
0000000000000000000000000000000000000000;;	  containers:
0000000000000000000000000000000000000000;;	    - name: vttablet
0000000000000000000000000000000000000000;;	      image: vitess/lite:v2.0.0-alpha5
0000000000000000000000000000000000000000;;	      volumeMounts:
0000000000000000000000000000000000000000;;	        - name: syslog
0000000000000000000000000000000000000000;;	          mountPath: /dev/log
0000000000000000000000000000000000000000;;	        - name: vtdataroot
0000000000000000000000000000000000000000;;	          mountPath: /vt/vtdataroot
0000000000000000000000000000000000000000;;	        - name: certs
0000000000000000000000000000000000000000;;	          readOnly: true
0000000000000000000000000000000000000000;;	          mountPath: /etc/ssl/certs
0000000000000000000000000000000000000000;;	      resources:
0000000000000000000000000000000000000000;;	        limits:
0000000000000000000000000000000000000000;;	          memory: "1Gi"
0000000000000000000000000000000000000000;;	          cpu: "500m"
0000000000000000000000000000000000000000;;	      command:
0000000000000000000000000000000000000000;;	        - bash
0000000000000000000000000000000000000000;;	        - "-c"
0000000000000000000000000000000000000000;;	        - >-
0000000000000000000000000000000000000000;;	          set -e
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	          mysql_socket="$VTDATAROOT/{{tablet_subdir}}/mysql.sock"
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	          mkdir -p $VTDATAROOT/tmp
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	          chown -R vitess /vt
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	          while [ ! -e $mysql_socket ]; do
0000000000000000000000000000000000000000;;	          echo "[$(date)] waiting for $mysql_socket" ;
0000000000000000000000000000000000000000;;	          sleep 1 ;
0000000000000000000000000000000000000000;;	          done
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	          su -p -s /bin/bash -c "mysql -u vt_dba -S $mysql_socket
0000000000000000000000000000000000000000;;	          -e 'CREATE DATABASE IF NOT EXISTS vt_{{keyspace}}'" vitess
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	          su -p -s /bin/bash -c "/vt/bin/vttablet
0000000000000000000000000000000000000000;;	          -topo_implementation etcd
0000000000000000000000000000000000000000;;	          -etcd_global_addrs http://$ETCD_GLOBAL_SERVICE_HOST:$ETCD_GLOBAL_SERVICE_PORT
0000000000000000000000000000000000000000;;	          -log_dir $VTDATAROOT/tmp
0000000000000000000000000000000000000000;;	          -alsologtostderr
0000000000000000000000000000000000000000;;	          -port {{port}}
0000000000000000000000000000000000000000;;	          -grpc_port {{grpc_port}}
0000000000000000000000000000000000000000;;	          -service_map 'grpc-queryservice,grpc-tabletmanager,grpc-updatestream'
0000000000000000000000000000000000000000;;	          -binlog_player_protocol grpc
0000000000000000000000000000000000000000;;	          -tablet-path {{alias}}
0000000000000000000000000000000000000000;;	          -tablet_hostname $(hostname -i)
0000000000000000000000000000000000000000;;	          -init_keyspace {{keyspace}}
0000000000000000000000000000000000000000;;	          -init_shard {{shard}}
0000000000000000000000000000000000000000;;	          -target_tablet_type {{tablet_type}}
0000000000000000000000000000000000000000;;	          -mysqlctl_socket $VTDATAROOT/mysqlctl.sock
0000000000000000000000000000000000000000;;	          -db-config-app-uname vt_app
0000000000000000000000000000000000000000;;	          -db-config-app-dbname vt_{{keyspace}}
0000000000000000000000000000000000000000;;	          -db-config-app-charset utf8
0000000000000000000000000000000000000000;;	          -db-config-dba-uname vt_dba
0000000000000000000000000000000000000000;;	          -db-config-dba-dbname vt_{{keyspace}}
0000000000000000000000000000000000000000;;	          -db-config-dba-charset utf8
0000000000000000000000000000000000000000;;	          -db-config-repl-uname vt_repl
0000000000000000000000000000000000000000;;	          -db-config-repl-dbname vt_{{keyspace}}
0000000000000000000000000000000000000000;;	          -db-config-repl-charset utf8
0000000000000000000000000000000000000000;;	          -db-config-filtered-uname vt_filtered
0000000000000000000000000000000000000000;;	          -db-config-filtered-dbname vt_{{keyspace}}
0000000000000000000000000000000000000000;;	          -db-config-filtered-charset utf8
0000000000000000000000000000000000000000;;	          -enable-rowcache
0000000000000000000000000000000000000000;;	          -rowcache-bin /usr/bin/memcached
0000000000000000000000000000000000000000;;	          -rowcache-socket $VTDATAROOT/{{tablet_subdir}}/memcache.sock
0000000000000000000000000000000000000000;;	          -health_check_interval 5s
0000000000000000000000000000000000000000;;	          -restore_from_backup {{backup_flags}}" vitess
0000000000000000000000000000000000000000;;	    - name: mysql
0000000000000000000000000000000000000000;;	      image: vitess/lite:v2.0.0-alpha5
0000000000000000000000000000000000000000;;	      volumeMounts:
0000000000000000000000000000000000000000;;	        - name: syslog
0000000000000000000000000000000000000000;;	          mountPath: /dev/log
0000000000000000000000000000000000000000;;	        - name: vtdataroot
0000000000000000000000000000000000000000;;	          mountPath: /vt/vtdataroot
0000000000000000000000000000000000000000;;	      resources:
0000000000000000000000000000000000000000;;	        limits:
0000000000000000000000000000000000000000;;	          memory: "1Gi"
0000000000000000000000000000000000000000;;	          cpu: "500m"
0000000000000000000000000000000000000000;;	      command:
0000000000000000000000000000000000000000;;	        - sh
0000000000000000000000000000000000000000;;	        - "-c"
0000000000000000000000000000000000000000;;	        - >-
0000000000000000000000000000000000000000;;	          mkdir -p $VTDATAROOT/tmp &&
0000000000000000000000000000000000000000;;	          chown -R vitess /vt
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	          su -p -c "/vt/bin/mysqlctld
0000000000000000000000000000000000000000;;	          -log_dir $VTDATAROOT/tmp
0000000000000000000000000000000000000000;;	          -alsologtostderr
0000000000000000000000000000000000000000;;	          -tablet_uid {{uid}}
0000000000000000000000000000000000000000;;	          -socket_file $VTDATAROOT/mysqlctl.sock
0000000000000000000000000000000000000000;;	          -db-config-app-uname vt_app
0000000000000000000000000000000000000000;;	          -db-config-app-dbname vt_{{keyspace}}
0000000000000000000000000000000000000000;;	          -db-config-app-charset utf8
0000000000000000000000000000000000000000;;	          -db-config-dba-uname vt_dba
0000000000000000000000000000000000000000;;	          -db-config-dba-dbname vt_{{keyspace}}
0000000000000000000000000000000000000000;;	          -db-config-dba-charset utf8
0000000000000000000000000000000000000000;;	          -db-config-repl-uname vt_repl
0000000000000000000000000000000000000000;;	          -db-config-repl-dbname vt_{{keyspace}}
0000000000000000000000000000000000000000;;	          -db-config-repl-charset utf8
0000000000000000000000000000000000000000;;	          -db-config-filtered-uname vt_filtered
0000000000000000000000000000000000000000;;	          -db-config-filtered-dbname vt_{{keyspace}}
0000000000000000000000000000000000000000;;	          -db-config-filtered-charset utf8
0000000000000000000000000000000000000000;;	          -bootstrap_archive mysql-db-dir_10.0.13-MariaDB.tbz" vitess
0000000000000000000000000000000000000000;;	        # The bootstrap archive above contains an empty mysql data dir
0000000000000000000000000000000000000000;;	        # with user permissions set up as required by Vitess. The archive is
0000000000000000000000000000000000000000;;	        # included in the Docker image.
0000000000000000000000000000000000000000;;	      env:
0000000000000000000000000000000000000000;;	        - name: EXTRA_MY_CNF
0000000000000000000000000000000000000000;;	          value: /vt/config/mycnf/master_mariadb.cnf
0000000000000000000000000000000000000000;;	  volumes:
0000000000000000000000000000000000000000;;	    - name: syslog
0000000000000000000000000000000000000000;;	      hostPath: {path: /dev/log}
0000000000000000000000000000000000000000;;	    - name: vtdataroot
0000000000000000000000000000000000000000;;	      emptyDir: {}
0000000000000000000000000000000000000000;;	    - name: certs
0000000000000000000000000000000000000000;;	      hostPath: {path: /etc/ssl/certs}
0000000000000000000000000000000000000000;;	
