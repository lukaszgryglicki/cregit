0000000000000000000000000000000000000000;;	package system
b515bda5eede841df021a5bfcc6c5c7c7a1e907e;;	
0000000000000000000000000000000000000000;;	import (
0000000000000000000000000000000000000000;;		"syscall"
0000000000000000000000000000000000000000;;		"unsafe"
0000000000000000000000000000000000000000;;	)
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	// Lgetxattr retrieves the value of the extended attribute identified by attr
0000000000000000000000000000000000000000;;	// and associated with the given path in the file system.
0000000000000000000000000000000000000000;;	// It will returns a nil slice and nil error if the xattr is not set.
0000000000000000000000000000000000000000;;	func Lgetxattr(path string, attr string) ([]byte, error) {
0000000000000000000000000000000000000000;;		pathBytes, err := syscall.BytePtrFromString(path)
0000000000000000000000000000000000000000;;		if err != nil {
0000000000000000000000000000000000000000;;			return nil, err
0000000000000000000000000000000000000000;;		}
0000000000000000000000000000000000000000;;		attrBytes, err := syscall.BytePtrFromString(attr)
0000000000000000000000000000000000000000;;		if err != nil {
0000000000000000000000000000000000000000;;			return nil, err
0000000000000000000000000000000000000000;;		}
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;		dest := make([]byte, 128)
0000000000000000000000000000000000000000;;		destBytes := unsafe.Pointer(&dest[0])
0000000000000000000000000000000000000000;;		sz, _, errno := syscall.Syscall6(syscall.SYS_LGETXATTR, uintptr(unsafe.Pointer(pathBytes)), uintptr(unsafe.Pointer(attrBytes)), uintptr(destBytes), uintptr(len(dest)), 0, 0)
0000000000000000000000000000000000000000;;		if errno == syscall.ENODATA {
0000000000000000000000000000000000000000;;			return nil, nil
0000000000000000000000000000000000000000;;		}
0000000000000000000000000000000000000000;;		if errno == syscall.ERANGE {
0000000000000000000000000000000000000000;;			dest = make([]byte, sz)
0000000000000000000000000000000000000000;;			destBytes := unsafe.Pointer(&dest[0])
0000000000000000000000000000000000000000;;			sz, _, errno = syscall.Syscall6(syscall.SYS_LGETXATTR, uintptr(unsafe.Pointer(pathBytes)), uintptr(unsafe.Pointer(attrBytes)), uintptr(destBytes), uintptr(len(dest)), 0, 0)
0000000000000000000000000000000000000000;;		}
0000000000000000000000000000000000000000;;		if errno != 0 {
0000000000000000000000000000000000000000;;			return nil, errno
0000000000000000000000000000000000000000;;		}
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;		return dest[:sz], nil
0000000000000000000000000000000000000000;;	}
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	var _zero uintptr
0000000000000000000000000000000000000000;;	
0000000000000000000000000000000000000000;;	// Lsetxattr sets the value of the extended attribute identified by attr
0000000000000000000000000000000000000000;;	// and associated with the given path in the file system.
0000000000000000000000000000000000000000;;	func Lsetxattr(path string, attr string, data []byte, flags int) error {
0000000000000000000000000000000000000000;;		pathBytes, err := syscall.BytePtrFromString(path)
0000000000000000000000000000000000000000;;		if err != nil {
0000000000000000000000000000000000000000;;			return err
0000000000000000000000000000000000000000;;		}
0000000000000000000000000000000000000000;;		attrBytes, err := syscall.BytePtrFromString(attr)
0000000000000000000000000000000000000000;;		if err != nil {
0000000000000000000000000000000000000000;;			return err
0000000000000000000000000000000000000000;;		}
0000000000000000000000000000000000000000;;		var dataBytes unsafe.Pointer
0000000000000000000000000000000000000000;;		if len(data) > 0 {
0000000000000000000000000000000000000000;;			dataBytes = unsafe.Pointer(&data[0])
0000000000000000000000000000000000000000;;		} else {
0000000000000000000000000000000000000000;;			dataBytes = unsafe.Pointer(&_zero)
0000000000000000000000000000000000000000;;		}
0000000000000000000000000000000000000000;;		_, _, errno := syscall.Syscall6(syscall.SYS_LSETXATTR, uintptr(unsafe.Pointer(pathBytes)), uintptr(unsafe.Pointer(attrBytes)), uintptr(dataBytes), uintptr(len(data)), uintptr(flags), 0)
0000000000000000000000000000000000000000;;		if errno != 0 {
0000000000000000000000000000000000000000;;			return errno
0000000000000000000000000000000000000000;;		}
0000000000000000000000000000000000000000;;		return nil
0000000000000000000000000000000000000000;;	}
